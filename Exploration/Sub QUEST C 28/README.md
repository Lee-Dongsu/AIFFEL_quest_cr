# Exploration 07 Project

## 팁 공유

- 최근 Tensorflow에서는, model.save() 말고 model.export()를 해야 pb 형식 저장 가능
- 모델 디렉터리 구조 참고용 (GPT가 추천한 방식)

  ```bash
  my_tf_project/
    Dockerfile
    my_model_saved/
      1/
        saved_model.pb
        variables/
          variables.index
          variables.data-00000-of-00001
  ```

![alt text](<screenshots/Screenshot 2024-12-10 at 16.21.55.png>)

## 문제 및 해결

### Use model.export

- 오류 메시지

  ```bash
  ValueError: Invalid filepath extension for saving. Please add either a .keras extension for the native Keras format (recommended) or a .h5 extension. Use model.export(filepath) if you want to export a SavedModel for use with TFLite/TFServing/etc. Received: filepath=cifar10_model_saved.
  ```

- 해결법
  - SavedModel 형식으로 저장
    - 이전에는 model.save('cifar10_model_saved') 로 가능했지만
    - 이제는 model.export()를 사용해서 SavedModel으로 내보내야 함.
  - `model.export('cifar10_model_saved')`

## 코더 회고

- 배운 점
  - 이동수: 모델 튜닝과 배포 과정을 처음부터 끝까지 체험해보며 전체적인 흐름을 이해할 수 있었습니다. 실제로 모델을 다듬고 활용하는 과정의 복잡성을 조금씩 익힐 수 있었습니다.
  - 권오근: 모델구성과 학습 및 튜닝도 해보고 도커 환경에서 TFserving으로 모델을 배포하는 일련의 과정을 배워봤습니다!
  - 민혁: MLOps 전체 프로세스를 경험해보고, docker를 활용한 이미지/컨테이너 다루는 법, TFLite를 통한 플러터 앱 내부 모델 내장 방법 등을 간단하게 살펴볼 수 있었다.

- 아쉬운 점
  - 이동수: 아직 익숙하지 않은 부분이 많아 완전히 이해하지 못한 영역이 존재했습니다. 이론뿐만 아니라 실전 경험이 더 필요하다는 점을 느꼈습니다.
  - 권오근: TFServing 설정과 Docker 경로 문제로 많은 시간을 소모했고 작동이 정상적으로 되지 않아 아쉬웠습니다ㅠ
  - 민혁: 오랜만에 docker를 만져보니, 예전 기억이 새록새록 떠오르면서도 벌써 다 까먹어버린 게 당황스럽고 아쉬웠다. 아이펠톤을 위해 천천히 복습해나가야겠다.

- 느낀 점
  - 이동수: 모델을 정리하고 배포하는 과정이 생각보다 까다롭고, 많은 시간과 노력이 요구된다는 점을 실감했습니다. 이러한 과정이 반복되며 점차 익숙해질 수 있기를 기대합니다.
  - 권오근: 개발뿐만 아니라 서비스 관점에서 모델을 운영하는 경험은 또 다르게 느껴졌습니다.
  - 민혁: 역시 뭐든 한 번 배우고 끝이 아니라 계속 써야 한다... 그리고 필요한 기능들은 어떻게든 다시 찾게 되어있으니, 어려우면 대충 "그렇구나" 하고 넘어가야겠다.

- 어려웠던 점
  - 이동수: 환경 구축과 다양한 툴 사용이 미숙해서 작업 속도가 더뎠습니다. 새로운 기술 스택을 다루는 데 시간이 걸렸지만, 익숙해지면 더 나은 결과를 얻을 수 있을 것 같습니다.
  - 권오근: Docker 경로 매핑, TFServing의 환경 설정, 그리고 API 호출 과정에서 디버깅이 쉽지 않았어요.
  - 민혁: 머리로는 대충 플로우가 그려지는데 직접 구현하려면 머리 아프고 귀찮은 것들이 너무 많았다. 특히, MLOps 자체 개념에 대해서 그림은 그려지는데, 구체화가 하나도 안 되는 느낌? 그냥 미래의 내가 알아서 하겠지 뭐.

## 피어리뷰 템플릿

- 리뷰어: 강윤제, 고은비, 노은하, 김승기

- [x]  __1. 주어진 문제를 해결하는 완성된 코드가 제출되었나요? (완성도)__
  - 문제에서 요구하는 최종 결과물이 첨부되었는지 확인
  - 문제를 해결하는 완성된 코드란 프로젝트 루브릭 3개 중 2개,
    퀘스트 문제 요구조건 등을 지칭
    - 해당 조건을 만족하는 부분의 코드 및 결과물을 캡쳐하여 사진으로 첨부
  ![image](https://github.com/user-attachments/assets/cd74c38d-811c-4051-90b7-79c282f3f154)  


- [x]  __2. 프로젝트에서 핵심적인 부분에 대한 설명이 주석(닥스트링) 및 마크다운 형태로 잘 기록되어있나요? (설명)__
  - [x]  모델 선정 이유
  - [x]  하이퍼 파라미터 선정 이유
  - [x]  데이터 전처리 이유 또는 방법 설명

- [x]  __3. 체크리스트에 해당하는 항목들을 수행하였나요? (문제 해결)__
  - [x]  데이터를 분할하여 프로젝트를 진행했나요? (train, validation, test 데이터로 구분)
  - [x]  하이퍼파라미터를 변경해가며 여러 시도를 했나요? (learning rate, dropout rate, unit, batch size, epoch 등)
  - [x]  각 실험을 시각화하여 비교하였나요?
  - [x]  모든 실험 결과가 기록되었나요?

- [x]  __4. 프로젝트에 대한 회고가 상세히 기록 되어 있나요? (회고, 정리)__
  - [x]  배운 점
  - [x]  아쉬운 점
  - [x]  느낀 점
  - [x]  어려웠던 점

- [ ]  __5.  앱으로 구현하였나요?__
  - [ ]  구현된 앱이 잘 동작한다.
  - [x]  모델이 잘 동작한다.

## 리뷰어 회고(참고 링크 및 코드 개선)

```Plaintext
강윤제 : Docker로 열어볼려는 시도가 눈에 띄네요. 고생하셨습니다!
고은비 : 루브릭 기준에 맞춰서 잘 수행하신 것 같습니다. 수고 많으셨습니다~
노은하 : 서버를 구동하기 위한 폴더path가 중요함을 새삼느끼게 되는 노드였다. 그리고 윤제님과 민혁님의 서버강의로 다음에 서버세팅시 참조할 부분이 많았다.
김승기 : 늘 그렇지만 플러터에 연결하는 작업이 너무 어려웠습니다. exploration 진행하느라 고생많으셨습니다.
```
